name: "Update cargo version"
description: "Update cargo version"
inputs:
  semvar:
    description: "Version update to make"
    required: true
  # cargo-path:
  #   description: "Version update to make"
  #   required: true

permissions:
  contents: write
  package: write

# '${{ inputs.cargo-path }}',
runs:
  using: "composite"
  steps:
    - uses: actions/checkout@v3

    - name: Install packages
      run: |
        yarn init --yes
        yarn add @iarna/toml
      shell: bash

    - name: Dump dir contents
      run: |
        ls ~/.config/yarn/global/node_modules/@iarna/toml/lib
        cat ~/.config/yarn/global/node_modules/@iarna/toml/package.json
      shell: bash

    - name: Update cargo version
      uses: actions/github-script@v4
      id: update-cargo-version
      with:
        script: |
          const toml = require('@iarna/toml')
          const script = require('.github/actions/update-cargo-version/script.js')
          const result = script({github, context, toml}, ${{ inputs.semvar }})
          console.log(result)

  # cargo-path: ./newworld/program/Cargo.toml

# https://github.com/alyssabenipayo/cloned-hfla-site/blob/919be6ed3c346144808b94a2a7e38b95454fba1f/github-actions/pr-instructions/post-comment.js
