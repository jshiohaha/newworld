name: "Make version changes"
description: "Make version changes"
inputs:
  changed-packages:
    description: "Changed packages - in format of <package>/<type>"
    required: true
  versioning:
    description: "Versioning command(s)"
    required: true
  branch:
    description: "Branch to checkout"
    required: true

runs:
  using: "composite"
  steps:
    - uses: actions/checkout@v3
      with:
        ref: ${{ inputs.branch }}

    # - name: Install cargo-release
    #   shell: bash
    #   run: cargo install cargo-release

    - name: Make version changes
      uses: actions/github-script@v4
      with:
        script: |
          const script = require('.github/actions/make-version-changes/script.js')
          await script({github, context, core}, ${{ inputs.changed-packages }}, ${{ inputs.versioning }})
